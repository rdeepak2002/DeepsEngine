<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1, IE=edge">
    <title>Deeps Engine</title>
    <style>
        .fullwindow {
            position: absolute;
            top: 0px;
            left: 0px;
            margin: 0px;
            border: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            display: block;
        }
    </style>
</head>
<body style="background-color: #FFFFFF;">
<canvas class="fullwindow" id="canvas" oncontextmenu="event.preventDefault()"></canvas>
<script type="text/javascript">
    var canvasElement = document.getElementById('canvas');
    var Module = {
        onRuntimeInitialized: function() {
            var onResizeGraphicsWindow = Module.cwrap('onResizeWindow', null, ['number', 'number']);

            var windowResizeListener = (event) => {
                if (onResizeGraphicsWindow !== undefined) {
                    var canvasWidth = canvasElement.clientWidth;
                    var canvasHeight = canvasElement.clientHeight;

                    if (canvasWidth !== undefined && canvasHeight !== undefined) {
                        onResizeGraphicsWindow(parseInt(canvasWidth), parseInt(canvasHeight));
                    } else {
                        console.error("Unable to get canvas element width and height");
                    }
                } else {
                    console.error("Unable to register external C function for handling window resize");
                }
            };

            windowResizeListener(undefined);

            window.addEventListener("resize", windowResizeListener);

            window.addEventListener("click", function() {
                var el = document.documentElement
                    , rfs =
                        el.requestFullScreen
                        || el.webkitRequestFullScreen
                        || el.mozRequestFullScreen
                ;
                rfs.call(el);
            });
        },
    };

    Module.canvas = canvasElement;
</script>
<script async type="text/javascript" src="./DeepsEngine.js"></script>
</body>
</html>